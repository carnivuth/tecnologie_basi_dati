- [[TRANSAZIONI]]
	- sequenza di operazioni che portano il db da uno stato iniziale consistente a uno stato finale consistente
	- gli stati intermedi **non sono perforza consistenti**
	- **COMMIT**
		- quando la transazione termina correttamente
	- **ROLLBACK**
	  id:: 642402f0-f791-4e84-a3d3-f55dacbe9ad5
		- quando la transazione fallisce
		- tutte le modifiche apportate devono essere annullate
		- le modifiche già salvate su disco devono essere annullate
	- possibile stabilire dei *punti di salvataggio* detti **SAVEPOINT**
		- la transazione in caso di ((642402f0-f791-4e84-a3d3-f55dacbe9ad5)) viene riportata all'ultimo savepoint
		- ![image.png](../assets/image_1680082202446_0.png)
	- #### CONCORRENZA
		- ##### ESECUZIONE SERIALE
			- solo una transazione può essere eseguita alla volta
			- scarsa efficienza delle transazioni
		- ##### ESECUZIONE INTERLEAVED
			- le transazioni vengono eseguite in maniera concorrente
			- maggiore efficienza
			- problematica del garantire l'isolamento
			- ![image.png](../assets/image_1680082481587_0.png)
			- #### PROBLEMATICHE DOVUTE ALLA CONCORRENZA
				- ##### LOST UPDATE
				  id:: 642406aa-f889-441c-81e4-c21a5100bd63
					- due transazioni eseguono una modifica allo stesso dato, aggiornamento inconsistente
					- ![image.png](../assets/image_1680083020660_0.png)
				- ##### DIRTY READ
				  id:: 642406bd-c2c6-4668-9af0-f396ed467565
					- una transazione ha letto dati modificati da un altra transazione non ancora terminata
					- ![image.png](../assets/image_1680083036998_0.png)
				- ##### UREPEATABLE READ
					- una transazione legge dati che vengono successivamente modificati da un altra transazione
					- ![image.png](../assets/image_1680083053217_0.png)
				- ##### PHANTOM ROW
					- una transazione aggiunge dati consistenti con i risultati di ricerca di un'altra transazione che ha già eseguito la lettura dei dati e non è a conoscenza della modifica
					- ![image.png](../assets/image_1680083074559_0.png)
			- #### PROPRIETA DELLO SCHEDULE
				- ##### SERIALE
					- schedule che esegue transazioni in maniera seriale
				- ##### SERIALIZZABILE
					- le transazioni terminate correttamente hanno lo stesso effetto che avrebbero in uno schedule seriale
				- ##### RECUPERABILE
					- se una transazione T1 legge un valore modificato da un altra transazione T2 T1 termina solo dopo la T2
					- possibile salvare il db da ((642406bd-c2c6-4668-9af0-f396ed467565))
				- ##### CASCADELESS
					- una transazione puo leggere solo valori che sono modificati da transazioni terminate correttamente
				- ##### STRICT
				  id:: 64240b30-c0cc-4333-936e-52a04da4e225
					- una transazione non scrive o legge valori modificati da un'altra transazione attiva
			- ### METODI PER GARANTIRE L'ISOLAMENTO
				- si sfruttano i **LOCK**
				- la richiesta del lock è implicita e invisibile al livello SQL
				- importante definire anche la granularità del lock
				- #### TIPOLOGIE DI LOCK
					- ##### SHARED
						- lock richiesto per leggere
					- ##### EXCLUSIVE
						- lock richiesto per scrivere
				- #### COMPATILBILITÀ TRA LOCK
				  id:: 64240e3c-8a07-4165-9367-21ea73ad7334
					- ![image.png](../assets/image_1680084611257_0.png)
					- possono essere presenti piu lock solo se tutti shared
				- il lock manager si occupa di gestire i lock sulle risorse del sistema
					- necessario definire un **PROTOCOLLO DI ACQUISIZIONE** del lock
					- #### PROTOCOLLI
						- ##### STRICT 2 PHASE LOCK
							- la transazione acquisisce quando sono necessari i lock richiesti ma non li rilascia fino alla terminazione
							- ![image.png](../assets/image_1680084903446_0.png)
							- possibili situazioni di **deadlock** in quel caso il sistema abortisce una delle due transazioni
							- non è necessario rilasciare i lock come operazioni atomiche al termine della transazione
							- in grado di evitare ((642406aa-f889-441c-81e4-c21a5100bd63))
								- ![image.png](../assets/image_1680085285142_0.png)
							- in grado di evitare ((642406bd-c2c6-4668-9af0-f396ed467565))
								- ![image.png](../assets/image_1680085451629_0.png)
							- gli schedule generati da questo protocollo insieme alla ((64240e3c-8a07-4165-9367-21ea73ad7334)) sono di tipo ((64240b30-c0cc-4333-936e-52a04da4e225))
							-
				-
				-
				-
				-
				-